import { AbstractAudioRenderer } from './abstract_audio_renderer.js';
import { personalityMarkup } from './audio_util.js';
export class StringRenderer extends AbstractAudioRenderer {
    markup(descrs) {
        let str = '';
        const markup = personalityMarkup(descrs);
        const clean = markup.filter((x) => x.span);
        if (!clean.length) {
            return str;
        }
        const len = clean.length - 1;
        for (let i = 0, descr; (descr = clean[i]); i++) {
            if (descr.span) {
                str += this.merge(descr.span);
            }
            if (i >= len) {
                continue;
            }
            const join = descr.join;
            str += typeof join === 'undefined' ? this.separator : join;
        }
        return str;
    }
}
